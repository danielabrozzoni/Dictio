<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>

        <div id="menu">
            <input type = "text" id = "code">
            <button onClick="joinRoom(document.getElementById('code').value)"> JOIN GAME </button>
        <br>
            <button onClick="createRoom()"> NEW GAME</button>
        </div>

        <div id="game" style="display: none">
            <p id = "scritta"> </p>
            <p id = "counter"> </p>
            <p id = "timer"> </p>
        </div>

        <script>

        var socket;

        let menu = document.createElement("div");
        menu.innerHTML = '';

        socket = io();

        var createRoom = function() {

            socket.emit('New room');

            //show_room();
        }

        var joinRoom = function(_code) {

            socket.emit('Join room', {
                code : _code
            });

        }

        function show_menu() {

            document.getElementById("menu").style.display = "block";
            document.getElementById("game").style.display = "none";
        }

        function show_game() {
            document.getElementById("menu").style.display = "none";
            document.getElementById("game").style.display = "block";
        }

        function join_room() {

            show_game();
            document.getElementById("scritta").innerHTML = "Questa è una stanza!";
        }

        function new_room(code) {

            show_game();
            document.getElementById("scritta").innerHTML =
                                    "Questa è una nuova stanza! Codice:" + code;
        }

        function players_counter(counter) {
            document.getElementById("counter").innerHTML = "Numero di giocatori: " + counter;
        }

        function preparation_time(timer) {
            document.getElementById("timer").innerHTML = "Timer: " + timer;
        }

        socket.on("Room joined", function(data) {

            join_room();
            players_counter(data.counter);

        });

        socket.on("Room created", function(data) {

            new_room(data.code);
            players_counter(1);
        });


        socket.on("Players counter", function(data) {
            players_counter(data.counter);
        })

        socket.on("Preparation time", function(data) {
            console.log("ciao");
            preparation_time(data.timer);
        })


        show_menu();
        </script>

    </body>
</html>
